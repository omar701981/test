# 遮罩像素比例視覺化系統

一個動態網頁應用程式，透過動畫演示來視覺化遮罩圖像中黑色像素（感興趣區域）的比例。

## 功能特色

- **圖像上傳**：載入原始圖像和對應的遮罩圖像
- **透明度混合**：將遮罩黑色像素以紅色半透明方式疊加在原始圖像上
- **動態動畫**：觀看黑色像素從原始位置飛行到整齊排列的方陣
- **互動控制**：播放、暫停、重置和拖拉進度條控制動畫
- **統計顯示**：即時顯示像素數量和比例統計
- **視覺圖表**：圓餅圖表示像素比例
- **響應式設計**：支援桌面和行動裝置

## 運作原理

1. **上傳圖像**：選擇原始圖像和對應的遮罩圖像
2. **處理分析**：系統分析遮罩以識別黑色像素（RGB ≤ 10）
3. **疊加創建**：黑色像素以紅色半透明方式疊加在原始圖像上
4. **動畫設置**：黑色像素按位置排序（由上至下、由左至右）並分配方陣中的目標位置
5. **動畫播放**：像素從原始位置動畫移動到方陣位置，具有緩動效果
6. **視覺化呈現**：最終方陣被矩形邊框包圍，並顯示比例統計

## 技術實現

- **純 JavaScript**：無需外部函式庫
- **Canvas 渲染**：使用 HTML5 Canvas 進行圖像處理和動畫
- **高效像素處理**：針對大型圖像處理的優化演算法
- **響應式動畫**：根據像素數量自動調整動畫時長（≤ 10 秒）
- **平滑緩動**：三次方緩入緩出動畫曲線，提供自然的運動效果

## 使用方法

1. 在網頁瀏覽器中開啟 `index.html`
2. 使用檔案輸入欄位上傳原始圖像和遮罩圖像
3. 點擊「處理圖像」來分析並準備視覺化
4. 使用播放控制項與動畫互動：
   - **播放**：開始動畫
   - **暫停**：在當前位置暫停
   - **重置**：返回初始狀態
   - **進度滑桿**：跳轉到特定動畫位置

## 範例圖像

專案包含測試用的範例圖像：
- `sample_image.jpg`：包含形狀的彩色測試圖像
- `sample_mask.jpg`：對應的遮罩，包含感興趣的白色區域

## 瀏覽器相容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 檔案結構

```
├── index.html          # 主要 HTML 檔案
├── styles.css          # CSS 樣式
├── script.js           # JavaScript 實現
├── sample_image.jpg    # 範例原始圖像
├── sample_mask.jpg     # 範例遮罩圖像
└── README.md          # 此檔案
```

## 動畫細節

- **排序方式**：白色像素按由上至下、由左至右排序
- **方陣佈局**：計算最佳方陣尺寸以維持長寬比；終點為 1×1 像素方塊
- **錯開時序**：每個像素有分批延遲（stagger），產生逐序視覺效果
- **緩動函數**：三次方緩入緩出，提供平滑的加速和減速
- **效能優化**：針對現代瀏覽器優化，達到流暢的 60fps 動畫

## 自訂設定

可在 `MaskVisualization` 類別中調整動畫參數：
- `animationDuration`：最大動畫時長（預設：8-10 秒）
- `gridPixelSize`：最終方陣中像素的大小（預設：6px）
- `gridSpacing`：方陣像素間的間距（預設：2px）
- 黑色像素檢測閾值（預設：RGB ≤ 10）